========
rstbuddy
========

.. toctree::
   :caption: Overview
   :hidden:

   overview/quickstart
   overview/installation
   overview/configuration
   overview/usage
   overview/faq

.. toctree::
   :caption: Runbook
   :hidden:

   runbook/contributing
   runbook/coding_standards

.. toctree::
   :caption: Reference
   :hidden:

   changelog
   api/models


This is the ``rstbuddy`` project, an command line project that provide helpful
utilities for working with reStructuredText, especially that generated by AI
which is often not very good at it makes Sphinx complain.

Overview
--------

This project provides a `click <https://click.palletsprojects.com/en/8.0.x/>`_
command line interface named ``rstbuddy`` that is the home of various bits of helper code that help us work with reStructuredText.

Features
^^^^^^^^

- ``rstbuddy fix``: recursively scan a directory for reStructuredText files and fix them.

   - Fix over/underline length mismatches with their headings
   - Ensure bulleted lists are properly indented, and have blank lines around them
   -

- ``rstbuddy check-links``: Recursively scan a directory for reStructuredText files and check for broken links

   - Check for ``:ref:`` and ``:doc:`` links that are not valid
   - Check for `Name <link>`_ links that are not valid
   - Print a report of all broken links, with filename, line number, and the link
   - Be able to simulate any User-Agent while scanning

   .. note::

      Cloudflare can often figure out that this script is a bot and give false positives, so you still
      should check the list of broken links manually to ensure they are not false positives.

Installation
------------

First, you will need to install `uv <https://docs.astral.sh/uv/>`_:

.. code-block:: bash

   $ sh -c "$(curl -fsSL https://astral.sh/uv/install)"

Ensure you have a system python installed that is at least version 3.11, though we prefer 3.13.  You
can do this via ``uv``.

.. code-block:: bash

   $ uv python install 3.13

Then you can install the script like so:

.. code-block:: bash

   $ uv tool install --python 3.13 rstbuddy/rstbuddy

This will install the ``rstbuddy`` command line tool in your path.

If you want to work on this codebase, see :doc:`/runbook/contributing` for more
information.